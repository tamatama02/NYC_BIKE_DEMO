# Big Data Journey Lab 5 : Zeppelin上で地図を表示する

## コンテンツ

- bike tripのデータから件数が多い開始地点となるステーションTOP10を抽出
- 抽出した情報をもとにangular（JavaScriptのフレームワーク）を使って地図表示
- dayOfWeek（平日／休日）、時間、Top Nを指定した上で、該当するステーション（開始地点に終了地点を加えた）地図を表示

> Notebookの「Journeys/New Data Lake/Tutorial 5」の内容に沿って操作します。

### bike tripのデータから件数が多いtrip経路（Pickup/Dropoffステーション）TOP10を抽出

- dataframeおよびテーブル（"bike_trips_temp"）を作成
- "bike_trips_temp"から地図表示に必要なデータを抽出
- 抽出した情報をangularの変数にbind

bindした変数は以下となります。

![](https://camo.githubusercontent.com/c3d54d5a95be8bec48d808f1522f26a6937d9370/68747470733a2f2f7777772e657665726e6f74652e636f6d2f73686172642f7336322f73682f62386336323562622d386165312d343261622d383431642d6538623536363837306261302f626536353832666535386634643661642f7265732f31613931643662652d626334322d343263332d386232312d3038393633623438626461632f736b697463682e706e67)


### 抽出した情報をもとにangular（JavaScriptのフレームワーク）を使って地図表示

angularで作成したscriptが、各ステーションの緯度経度（lat,lon）情報をもとにopenstreet上に地図アイコンをプロットします。

![](https://camo.githubusercontent.com/c061998366ffa3b5fbffb7f684885420a20dca41/68747470733a2f2f7777772e657665726e6f74652e636f6d2f73686172642f7336322f73682f32333463323263342d623663302d343063322d613461322d3962323465616661643164632f656231663739656164633139373234632f7265732f36323563316164382d633631652d346565632d396630352d3639623933353934376464332f736b697463682e706e67)


### dayOfWeek（平日／休日）、時間、Top Nを指定した上で、該当するステーション（開始地点に終了地点を加えた）地図を表示

ここでは、より複雑な地図を作成します。

具体的には、データを表示する際に指定した「dayOfWeek（平日／休日）、時間、Top N」内容をもとに、地図上にステーション（開始地点＋終了地点）をプロットできるようにします。



![](https://camo.githubusercontent.com/bb138b249da5bc330b720c21a3d1cfa21e1884aa/68747470733a2f2f7777772e657665726e6f74652e636f6d2f73686172642f7336322f73682f65643237393066612d313966382d346363312d616231612d3530643635373836373338662f323139616466316236666439313237642f7265732f63613839643863322d656661632d346634642d393461362d3532313964643266626535622f736b697463682e706e67)



上記指定した内容を反映した地図イメージ

![](https://camo.githubusercontent.com/d6e0acc7905f753ba704f07606c5a5b5fb924ce2/68747470733a2f2f7777772e657665726e6f74652e636f6d2f73686172642f7336322f73682f39323337646464392d373639372d343836302d383139392d3033383833396533636531342f346266396364613730383039663832312f7265732f61376339613336662d656430612d346239642d393361352d3562333365653430386338352f736b697463682e706e67)











