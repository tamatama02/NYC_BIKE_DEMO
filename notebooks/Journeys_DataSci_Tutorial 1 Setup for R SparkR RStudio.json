{"paragraphs":[{"text":"%md\n# DataSci Tutorial 1: R Setup for Zeppelin and RStudio Server\n\nThis tutorial was built for BDCS-CE version 17.4.1 as part of the Data Science Acceleration User Journey: <a href=\"https://oracle.github.io/learning-library/workshops/journey3-data-science/\" target=\"_blank\">here</a>.  Questions and feedback about the tutorial: <david.bayard@oracle.com>\n\n    These DataSci tutorials build on top of the New Data Lake tutorial.  Please start with the New Data Lake User Journey.  In particular, be sure you previously ran the \n    New Data Lake Tutorials: \"Citi Bike New York Demo Introduction and Setup\" and \"Working with Hive\".\n\nThis notebook provides shell scripts to configure R for Zeppelin and to install RStudio Server, which is an optional third-party tool to help with R coding.\n\n","dateUpdated":"2018-04-25T21:12:57+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":"true"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>DataSci Tutorial 1: R Setup for Zeppelin and RStudio Server</h1>\n<p>This tutorial was built for BDCS-CE version 17.4.1 as part of the Data Science Acceleration User Journey: <a href=\"https://oracle.github.io/learning-library/workshops/journey3-data-science/\" target=\"_blank\">here</a>. Questions and feedback about the tutorial: <a href=\"mailto:d&#x61;&#118;&#x69;&#x64;&#x2e;&#98;&#x61;&#121;&#97;&#114;&#x64;&#64;o&#x72;&#97;&#x63;&#x6c;&#x65;&#x2e;c&#x6f;&#109;\">d&#x61;&#118;&#x69;&#x64;&#x2e;&#98;&#x61;&#121;&#97;&#114;&#x64;&#64;o&#x72;&#97;&#x63;&#x6c;&#x65;&#x2e;c&#x6f;&#109;</a></p>\n<pre><code>These DataSci tutorials build on top of the New Data Lake tutorial.  Please start with the New Data Lake User Journey.  In particular, be sure you previously ran the \nNew Data Lake Tutorials: &quot;Citi Bike New York Demo Introduction and Setup&quot; and &quot;Working with Hive&quot;.\n</code></pre>\n<p>This notebook provides shell scripts to configure R for Zeppelin and to install RStudio Server, which is an optional third-party tool to help with R coding.</p>\n</div>"}]},"apps":[],"jobName":"paragraph_1524690777136_-1678647355","id":"20170808-163449_1475568497","dateCreated":"2018-04-25T21:12:57+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:6077"},{"title":"Script to setup R for use with Zeppelin (will take about 15 minutes)","text":"%sh\n\necho \"Starting script to setup R for use with Zeppelin. Please be patient.  You will not see any more output until it is finished.\"\n\n# need to explicitly download a specific version of stringi at this time.\ncat << EOF > /tmp/Rstringi.sh\n#export http_proxy=http://www-proxy.idc.oracle.com:80\n#export https_proxy=http://www-proxy.idc.oracle.com:80\nR -e \"options('download.file.method'='wget'); install.packages('https://cran.r-project.org/src/contrib/Archive/stringi/stringi_1.1.7.tar.gz', repos=NULL, type='source')\"\nEOF\nsudo chmod u+x /tmp/Rstringi.sh\nsudo /tmp/Rstringi.sh > /tmp/install-oracle-r-stringi.log 2>&1\necho \"last 100 lines of stringi preinstall\"\ntail -100 /tmp/install-oracle-r-stringi.log\n\nsudo /usr/bin/enable-zeppelin-r.sh > /tmp/install-oracle-r.log 2>&1\n\necho \"..\"\necho \"..\"\necho \"First 50 lines...\"\nhead -50 /tmp/install-oracle-r.log\n\necho \"..\"\necho \"..\"\necho \"Last 50 lines...\"\ntail -50 /tmp/install-oracle-r.log\n\necho \"..\"\necho \"..\"\necho \"done\"\n\necho \"done\"\n\n","user":"anonymous","dateUpdated":"2018-05-05T18:52:58+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":"false"},"colWidth":12,"editorMode":"ace/mode/sh","title":true,"results":{"0":{"graph":{"mode":"table","height":243.15,"optionOpen":false}}},"enabled":true,"editorHide":false,"tableHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1524690777137_-1679032104","id":"20171116-191608_4870432","dateCreated":"2018-04-25T21:12:57+0000","dateStarted":"2018-05-05T18:46:15+0000","dateFinished":"2018-05-05T18:50:53+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:6078"},{"title":"Install RStudio Server (will take about a minute)","text":"%sh\nsudo -- sh -c 'wget -nc -nv https://download2.rstudio.org/rstudio-server-rhel-1.0.143-x86_64.rpm; yum -y install --nogpgcheck rstudio-server-rhel-1.0.143-x86_64.rpm'","dateUpdated":"2018-04-25T21:12:57+0000","config":{"tableHide":false,"editorSetting":{"language":"sh","editOnDblClick":"false"},"colWidth":12,"editorMode":"ace/mode/sh","editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1524690777137_-1679032104","id":"20170807-203854_689528620","dateCreated":"2018-04-25T21:12:57+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:6079"},{"title":"Create a user for RStudio Server","text":"%sh\ncat <<EOF > /tmp/r_user.sh\n\tuseradd ruser\n\techo -e \"welcome1\\nwelcome1\" | passwd ruser\n\techo \"finsihed adduser\" \n\tusermod -a -G hive,hadoop ruser\n\techo \"finsihed groups\" \n\tsudo -u hdfs hadoop fs -mkdir /user/ruser\n\tsudo -u hdfs hadoop fs -chown ruser /user/ruser\n\techo \"finsihed hdoop fs commands\" \nEOF\n\nchmod a+x /tmp/r_user.sh\nsudo /tmp/r_user.sh\n\necho \"done\"","dateUpdated":"2018-04-25T21:12:57+0000","config":{"tableHide":false,"editorSetting":{"language":"sh","editOnDblClick":"false"},"colWidth":12,"editorMode":"ace/mode/sh","editorHide":false,"title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1524690777138_-1677877857","id":"20170808-190037_2014572394","dateCreated":"2018-04-25T21:12:57+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:6080"},{"text":"%md\n# Restart the Zeppelin notebook\n\nNow that we've installed some additional R packages for Zeppelin, you may need to restart the Zeppelin Notebook for R to work.  To do so,\n\n+ Go to the Setting tab\n+ Click on Notebook\n+ Click on Restart\n","dateUpdated":"2018-04-25T21:12:57+0000","config":{"editorSetting":{"language":"markdown","editOnDblClick":"true"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Restart the Zeppelin notebook</h1>\n<p>Now that we&rsquo;ve installed some additional R packages for Zeppelin, you may need to restart the Zeppelin Notebook for R to work. To do so,</p>\n<ul>\n  <li>Go to the Setting tab</li>\n  <li>Click on Notebook</li>\n  <li>Click on Restart</li>\n</ul>\n</div>"}]},"apps":[],"jobName":"paragraph_1524690777138_-1677877857","id":"20171116-195836_1547913088","dateCreated":"2018-04-25T21:12:57+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:6081"},{"title":"Test that R is working (will take a minute for initial startup)","text":"%r\n3+3\n","dateUpdated":"2018-05-05T18:52:34+0000","config":{"editorSetting":{"language":"r","editOnDblClick":false},"colWidth":12,"editorMode":"ace/mode/r","title":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1524690777138_-1677877857","id":"20170809-232210_598079324","dateCreated":"2018-04-25T21:12:57+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:6082","user":"anonymous","dateFinished":"2018-05-05T18:52:36+0000","dateStarted":"2018-05-05T18:52:34+0000"},{"title":"List of R packages now installed","text":"%r\nip <- as.data.frame(installed.packages()[,c(1,3:4)])\nrownames(ip) <- NULL\nip <- ip[is.na(ip$Priority),1:2,drop=FALSE]\nprint(ip, row.names=FALSE)","dateUpdated":"2018-05-05T18:52:41+0000","config":{"editorSetting":{"language":"r"},"colWidth":12,"editorMode":"ace/mode/r","title":true,"results":{"0":{"graph":{"mode":"table","height":828,"optionOpen":false}}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1524690777138_-1677877857","id":"20170809-232255_270585171","dateCreated":"2018-04-25T21:12:57+0000","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:6083","user":"anonymous","dateFinished":"2018-05-05T18:52:41+0000","dateStarted":"2018-05-05T18:52:41+0000"},{"text":"%md\n# Next Steps\n\nYour BDCS-CE environment is now setup with R, SparkR, RStudio Server, and many common R packages.\n\nProceed to the next Tutorial to see R and SparkR in action with the Zeppelin Notebook.\n","dateUpdated":"2018-04-25T21:12:57+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":"true"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Next Steps</h1>\n<p>Your BDCS-CE environment is now setup with R, SparkR, RStudio Server, and many common R packages.</p>\n<p>Proceed to the next Tutorial to see R and SparkR in action with the Zeppelin Notebook.</p>\n</div>"}]},"apps":[],"jobName":"paragraph_1524690777139_-1678262606","id":"20170813-132314_999701569","dateCreated":"2018-04-25T21:12:57+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:6084"},{"text":"%md\n### Change Log\nMay 5, 2018 - Pre-install a specific version of stringi to avoid picking incompatible version.\nNovember 16, 2017 - Updated for 17.4.1.  R is now installed, but need to still add some packages like knitr to work with Zeppelin\nSeptember 12, 2017 - Confirmed it works with BDCSCE 17.3.5\nAugust 13, 2017 - Confirmed it works with BDCS-CE 17.3.3-20\nAugust 11, 2017 - First version\n","dateUpdated":"2018-05-05T18:53:59+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":"true"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h3>Change Log</h3>\n<p>May 5, 2018 - Pre-install a specific version of stringi to avoid picking incompatible version.<br/>November 16, 2017 - Updated for 17.4.1. R is now installed, but need to still add some packages like knitr to work with Zeppelin<br/>September 12, 2017 - Confirmed it works with BDCSCE 17.3.5<br/>August 13, 2017 - Confirmed it works with BDCS-CE 17.3.3-20<br/>August 11, 2017 - First version</p>\n</div>"}]},"apps":[],"jobName":"paragraph_1524690777139_-1678262606","id":"20170807-213344_2033634383","dateCreated":"2018-04-25T21:12:57+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:6085","user":"anonymous","dateFinished":"2018-05-05T18:54:00+0000","dateStarted":"2018-05-05T18:53:59+0000"},{"text":"%sh\n","dateUpdated":"2018-04-25T21:12:57+0000","config":{"colWidth":12,"editorMode":"ace/mode/sh","results":{},"enabled":true,"editorSetting":{"language":"sh","editOnDblClick":"false"}},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1524690777139_-1678262606","id":"20170807-212453_1371905199","dateCreated":"2018-04-25T21:12:57+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:6086"}],"name":"Journeys/DataSci/Tutorial 1 Setup for R SparkR RStudio","id":"2DE4XUFCU","angularObjects":{"2DD6NF1GD:shared_process":[],"2DEYRE5Z7:shared_process":[],"2DBHU1VH8:shared_process":[],"2DBJEDYUY:shared_process":[],"2DB4EM98X:shared_process":[],"2DBXRFZ9E:shared_process":[],"2DCJFVXZH:shared_process":[],"2C4U48MY3_spark2:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}